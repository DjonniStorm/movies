(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{133:(e,t,s)=>{Promise.resolve().then(s.bind(s,2189))},1443:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var r=s(5594);let i=r.z.object({id:r.z.number().transform(e=>e.toString()),name:r.z.string(),type:r.z.string().optional(),year:r.z.number(),description:r.z.string(),shortDescription:r.z.string(),ageRating:r.z.number(),poster:r.z.object({url:r.z.string(),previewUrl:r.z.string()})}),l=r.z.array(i),o=async()=>{try{let s=await fetch("https://api.kinopoisk.dev/v1.4/movie?page=1&limit=20&selectFields=id&selectFields=name&selectFields=description&selectFields=shortDescription&selectFields=year&selectFields=ageRating&selectFields=poster&notNullFields=id&notNullFields=name&notNullFields=description&notNullFields=shortDescription&notNullFields=year&notNullFields=ageRating&notNullFields=poster.url&type=movie",{method:"GET",headers:{"X-API-KEY":"N7T5YSR-B664H27-GVZXW2V-QF0NHT5"},next:{revalidate:1e3}});if(!s.ok)throw Error("Failed to fetch movies");let r=await s.json(),i=l.safeParse(r.docs);if(!i.success){var e,t;throw console.warn(null===(e=i.error)||void 0===e?void 0:e.issues),Error("Failed to parse movies schema: ".concat(JSON.stringify(null===(t=i.error)||void 0===t?void 0:t.issues)))}return console.log(r.docs),r.docs}catch(e){if(console.warn(e),e instanceof Error)throw Error(e.message);throw Error("хз что")}};var n=s(5453),d=s(6786);let a=(0,n.v)()((0,d.lt)((e,t)=>({moviesItems:[],isLoading:!0,isError:!1,isFilter:!1,setFilter:t=>{e(e=>({...e,isFilter:t}))},addItems:async()=>{try{let t=await o();if(t instanceof Error)throw t;let s=t.map(e=>({...e,like:!1,id:e.id.toString()}));e(e=>({...e,moviesItems:s,isLoading:!1}))}catch(t){console.warn(t),e(e=>({...e,isError:!0,isLoading:!1}))}},getItem:e=>t().moviesItems.find(t=>(console.log(e,typeof e,t.id,typeof t.id,e===t.id),t.id===String(e))),addItem:t=>{e(e=>({...e,moviesItems:[...e.moviesItems,t]}))},reactItem:(s,r)=>{let i=t().moviesItems,l=i.find(e=>e.id===s);if(console.log(l,typeof s),i.find(e=>(console.log(e.id,e.id===s,e.id===String(s),String(s)),e.id===s)),l){if("dislike"===r){e(e=>({...e,moviesItems:i.filter(e=>e.id!==l.id)}));return}"like"===r&&e(e=>({...e,moviesItems:i.map(e=>(e.id===l.id&&(e.like=!0),e))}))}}})))},2189:(e,t,s)=>{"use strict";s.d(t,{ProductDescription:()=>d});var r=s(5155),i=s(1443);s(2115);var l=s(5695),o=s(3451),n=s(2768);let d=e=>{let{id:t}=e,{getItem:s}=(0,i.s)(),d=s(t);console.log("id",t,d);let a=(0,l.useRouter)(),c=()=>{a.push("/products")};if(!d)return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["item with id: ",t," not found"]}),(0,r.jsx)(n.$,{onClick:c,type:"button",children:"Назад"})]});let{name:u,year:m,description:h,ageRating:f,poster:v}=d;return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[(0,r.jsx)("div",{className:"flex-1 p-10 w-full h-full",children:(0,r.jsxs)("div",{className:"border border-black rounded-2xl flex flex-col md:flex-row w-full h-full p-5",children:[(0,r.jsx)("div",{className:"pr-5 md:border-r flex justify-center items-center w-50 md:w-100 overflow-hidden",children:(0,r.jsx)(o.h,{src:v.url,alt:u+"poster",width:150,height:200,className:"object-cover w-70 h-auto"})}),(0,r.jsxs)("div",{className:"w-full h-full p-5 flex flex-col justify-center gap-y-10",children:[(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)("h1",{className:"text-center text-3xl",children:u}),(0,r.jsxs)("p",{className:"absolute right-1 top-0 text-xl border rounded-xl p-2",children:[f,"+"]}),(0,r.jsx)("div",{className:"text-xl",children:"О фильме:"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"p-2 text-justify",children:h}),(0,r.jsxs)("div",{children:["Год выпуска: ",m]})]})]})]})}),(0,r.jsx)(n.$,{type:"button",onClick:c,children:"Назад"})]})}},2768:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),i=s(9434);let l=e=>{let{type:t,onClick:s,children:l,className:o="",...n}=e;return(0,r.jsx)("button",{onClick:s,type:t,className:(0,i.cn)("max-w-60 w-fit rounded-2xl text-xl bg-primary border-2 border-secondary p-5 hover:bg-primary/10 active:hover:bg-primary/10",o),...n,children:l})}},3451:(e,t,s)=>{"use strict";s.d(t,{h:()=>n});var r=s(5155),i=s(9434),l=s(6766),o=s(2115);let n=e=>{let{src:t,alt:s,width:n,height:d,className:a=""}=e,[c,u]=(0,o.useState)(()=>t||"/bad-image.gif");return(0,r.jsx)(l.default,{src:c,alt:s,width:n,height:d,className:(0,i.cn)(a),onError:e=>{u("/bad-image.gif"),console.log(e)}})}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(2596),i=s(9688);let l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[109,766,441,684,358],()=>t(133)),_N_E=e.O()}]);