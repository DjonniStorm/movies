(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{1443:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var s=i(5594);let r=s.z.object({id:s.z.number().transform(e=>e.toString()),name:s.z.string(),type:s.z.string().optional(),year:s.z.number(),description:s.z.string(),shortDescription:s.z.string(),ageRating:s.z.number(),poster:s.z.object({url:s.z.string(),previewUrl:s.z.string()})}),l=s.z.array(r),o=async()=>{try{let i=await fetch("https://api.kinopoisk.dev/v1.4/movie?page=1&limit=20&selectFields=id&selectFields=name&selectFields=description&selectFields=shortDescription&selectFields=year&selectFields=ageRating&selectFields=poster&notNullFields=id&notNullFields=name&notNullFields=description&notNullFields=shortDescription&notNullFields=year&notNullFields=ageRating&notNullFields=poster.url&type=movie",{method:"GET",headers:{"X-API-KEY":"N7T5YSR-B664H27-GVZXW2V-QF0NHT5"},next:{revalidate:1e3}});if(!i.ok)throw Error("Failed to fetch movies");let s=await i.json(),r=l.safeParse(s.docs);if(!r.success){var e,t;throw console.warn(null===(e=r.error)||void 0===e?void 0:e.issues),Error("Failed to parse movies schema: ".concat(JSON.stringify(null===(t=r.error)||void 0===t?void 0:t.issues)))}return console.log(s.docs),s.docs}catch(e){if(console.warn(e),e instanceof Error)throw Error(e.message);throw Error("хз что")}};var n=i(5453),d=i(6786);let a=(0,n.v)()((0,d.lt)((e,t)=>({moviesItems:[],isLoading:!0,isError:!1,isFilter:!1,setFilter:t=>{e(e=>({...e,isFilter:t}))},addItems:async()=>{try{let t=await o();if(t instanceof Error)throw t;let i=t.map(e=>({...e,like:!1,id:e.id.toString()}));e(e=>({...e,moviesItems:i,isLoading:!1}))}catch(t){console.warn(t),e(e=>({...e,isError:!0,isLoading:!1}))}},getItem:e=>t().moviesItems.find(t=>(console.log(e,typeof e,t.id,typeof t.id,e===t.id),t.id===String(e))),addItem:t=>{e(e=>({...e,moviesItems:[...e.moviesItems,t]}))},reactItem:(i,s)=>{let r=t().moviesItems,l=r.find(e=>e.id===i);if(console.log(l,typeof i),r.find(e=>(console.log(e.id,e.id===i,e.id===String(i),String(i)),e.id===i)),l){if("dislike"===s){e(e=>({...e,moviesItems:r.filter(e=>e.id!==l.id)}));return}"like"===s&&e(e=>({...e,moviesItems:r.map(e=>(e.id===l.id&&(e.like=!0),e))}))}}})))},3062:(e,t,i)=>{"use strict";i.d(t,{FilterComponent:()=>n});var s=i(5155),r=i(9434);let l=e=>{let{width:t,height:i,color:l,className:o}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,fill:l,viewBox:"0 -960 960 960",className:(0,r.cn)(o),children:(0,s.jsx)("path",{d:"M400-240v-80h160v80H400ZM240-440v-80h480v80H240ZM120-640v-80h720v80H120Z"})})};var o=i(1443);let n=()=>{let{isFilter:e,setFilter:t}=(0,o.s)();return(0,s.jsx)("div",{className:(0,r.cn)("p-3 border border-black rounded w-fit bg-primary hover:bg-secondary/80 transition active:bg-secondary",{"bg-secondary":e}),onClick:()=>{t(!e)},children:(0,s.jsx)(l,{width:30,height:30,color:e?"#d3d3d3":"#000",className:(0,r.cn)("transition hover:fill-primary",{"fill-primary":e})})})}},3341:(e,t,i)=>{Promise.resolve().then(i.bind(i,3062)),Promise.resolve().then(i.bind(i,6773))},3451:(e,t,i)=>{"use strict";i.d(t,{h:()=>n});var s=i(5155),r=i(9434),l=i(6766),o=i(2115);let n=e=>{let{src:t,alt:i,width:n,height:d,className:a=""}=e,[c,h]=(0,o.useState)(()=>t||"/bad-image.gif");return(0,s.jsx)(l.default,{src:c,alt:i,width:n,height:d,className:(0,r.cn)(a),onError:e=>{h("/bad-image.gif"),console.log(e)}})}},6773:(e,t,i)=>{"use strict";i.d(t,{ProductSection:()=>u});var s=i(5155),r=i(1443),l=i(2115),o=i(6874),n=i.n(o),d=i(3451);let a=e=>{let{width:t,height:i,color:r}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,fill:r,viewBox:"0 -960 960 960",children:(0,s.jsx)("path",{d:"M240-840h440v520L400-40l-50-50q-7-7-11.5-19t-4.5-23v-14l44-174H120q-32 0-56-24t-24-56v-80q0-7 2-15t4-15l120-282q9-20 30-34t44-14Zm360 80H240L120-480v80h360l-54 220 174-174v-406Zm0 406v-406 406Zm80 34v-80h120v-360H680v-80h200v520H680Z"})})},c=e=>{let{width:t,height:i,color:r}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,fill:r,viewBox:"0 -960 960 960",children:(0,s.jsx)("path",{d:"M720-120H280v-520l280-280 50 50q7 7 11.5 19t4.5 23v14l-44 174h258q32 0 56 24t24 56v80q0 7-2 15t-4 15L794-168q-9 20-30 34t-44 14Zm-360-80h360l120-280v-80H480l54-220-174 174v406Zm0-406v406-406Zm-80-34v80H160v360h120v80H80v-520h200Z"})})},h=e=>{let{width:t,height:i,bg:r="none",onClick:l}=e;return(0,s.jsx)("div",{onClick:l,children:(0,s.jsx)(c,{width:t,height:i,color:"none"===r?"#000":"#F00"})})},m=e=>{let{width:t,height:i,bg:r="none",onClick:l}=e;return(0,s.jsx)("div",{onClick:l,children:(0,s.jsx)(a,{width:t,height:i,color:"none"===r?"#000":"#F00"})})},v=e=>{let{id:t}=e,{reactItem:i}=(0,r.s)(),[o,n]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"flex justify-around items-center",children:[(0,s.jsx)(h,{onClick:()=>{if(i(t,"like"),o){n(!1);return}n(!0)},width:30,height:30,bg:o?"like":"none"}),(0,s.jsx)(m,{onClick:()=>{i(t,"dislike")},width:30,height:30})]})},g=e=>{let{id:t,name:i,year:r,shortDescription:l,poster:o,link:a,ageRating:c}=e;return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n(),{href:a,className:"flex justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-2 p-1 relative w-60 h-80 max-h-[400px] border border-black rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-1 right-1 text-sm",children:c>=0&&(0,s.jsxs)("p",{children:[c,"+"]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center h-full justify-around",children:[(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)(d.h,{src:o.url,alt:"".concat(i," poster"),width:124,height:292,className:"rounded-lg object-cover"})}),(0,s.jsxs)("div",{className:"flex w-full justify-between items-center px-2",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold truncate",title:i,children:i}),(0,s.jsx)("p",{className:"text-sm",children:r})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3 leading-relaxed",title:l,children:l})]})]})}),(0,s.jsx)(v,{id:t})]})},u=()=>{let{moviesItems:e,isError:t,isFilter:i,addItems:o}=(0,r.s)();if((0,l.useEffect)(()=>{e.length||o(),e.forEach(e=>console.log(e))},[]),t)return(0,s.jsx)("p",{children:"Error"});let n=i?e.filter(e=>e.like):e;return(0,s.jsx)("section",{className:"flex-1 px-4 py-6 grid grid-cols-1 items-center sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 justify-center gap-6 max-w-screen-2xl mx-auto",children:n.map(e=>(0,s.jsx)(g,{id:e.id,name:e.name,year:e.year,shortDescription:e.shortDescription,ageRating:e.ageRating,poster:e.poster,link:"/products/".concat(e.id)},e.id))})}},9434:(e,t,i)=>{"use strict";i.d(t,{cn:()=>l});var s=i(2596),r=i(9688);let l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[109,766,874,441,684,358],()=>t(3341)),_N_E=e.O()}]);